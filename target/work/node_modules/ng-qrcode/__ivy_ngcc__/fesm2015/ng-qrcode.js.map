{"version":3,"file":"ng-qrcode.js","sources":["../../../projects/ng-qrcode/src/lib/qr-code.component.ts","../../../projects/ng-qrcode/src/lib/qr-code.directive.ts","../../../projects/ng-qrcode/src/lib/qr-code.module.ts","../../../projects/ng-qrcode/src/public-api.ts","../../../projects/ng-qrcode/src/ng-qrcode.ts"],"names":[],"mappings":";;;;;;;;;;;;;;MAmBa,eAAe;AAC5B;2CAjBC,SAAS,SAAC,kBACT,QAAQ,EAAE,SAAS;eACnB,QAAQ,EAAE,yYAWT,cAEF;;;;iGACI;AAAC;AAEG,oBAAN,KAAK;AACN,mBAEC,KAAK;AACN,mCAEC,KAAK;AACN,6BAEC,KAAK;AACN,8BAEC,KAAK;AACN,qBAEC,KAAK;AACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAE;AAAC;AAAC,MC7BQ,eAAe;AAAG,IA6B7B,YACU,gBAAkC;AAC5C,QADU,qBAAgB,GAAhB,gBAAgB,CAAkB;AAAC;AAK/B,QAvBuB,yBAAoB,GAA+B,eAAe,CAAC,8BAA8B,CAAA;AACxI;AAEyB,QAUA,WAAM,GAAG,EAAE,CAAA;AACpC,KAMG;AACH,IACQ,WAAW;AACnB;AAAoB;AAImB,YAJnC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACrB,gBAAM,OAAM;AACZ,aAAK;AACL,YACI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,GAAG,EAAE,EAAE;AAC3C,gBAAM,OAAO,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAA;AAC1D,gBAAM,IAAI,CAAC,OAAO,GAAG,EAAE,CAAA;AACvB,aAAK;AAAC,iBAAK,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE;AACjD,gBAAM,OAAO,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAA;AACzD,gBAAM,IAAI,CAAC,OAAO,GAAG,CAAC,CAAA;AACtB,aAAK;AAAC,iBAAK,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;AAClE,gBAAM,OAAO,CAAC,IAAI,CAAC,gEAAgE,CAAC,CAAA;AACpF,gBAAM,IAAI,CAAC,OAAO,GAAG,SAAS,CAAA;AAC9B,aAAK;AACL,YACI,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,aAAyC,CAAA;AAC1F,YACI,IAAI,CAAC,MAAM,EAAE;AACjB;AACU,gBAAJ,OAAM;AACZ,aAAK;AACL,YACI,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;AAC3C,YACI,IAAI,OAAO,EAAE;AACjB,gBAAM,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;AAC1E,aAAK;AACL,YACI,MAAM,oBAAoB,SAAG,IAAI,CAAC,oBAAoB,mCAAI,eAAe,CAAC,8BAA8B,CAAA;AAC5G,YACI,MAAM,MAAM;AAChB,iBAAO,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE;AACpC,gBAAQ,OAAO,EAAE,IAAI,CAAC,OAAO;AAC7B,gBAAQ,oBAAoB;AAC5B,gBAAQ,KAAK,EAAE,IAAI,CAAC,KAAK;AACzB,gBAAQ,MAAM,EAAE,IAAI,CAAC,MAAM;AAC3B,aAAO,CAAC,CAAA;AACR,YACI,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAA;AAC9C,YAAI,MAAM,gBAAgB,GAAG,eAAe,CAAC,IAAI,CAAC,gBAAgB,EAAE,eAAe,CAAC,yBAAyB,CAAC,CAAA;AAC9G,YAAI,MAAM,iBAAiB,GAAG,eAAe,CAAC,IAAI,CAAC,iBAAiB,EAAE,eAAe,CAAC,yBAAyB,CAAC,CAAA;AAChH,YACI,IAAI,cAAc,IAAI,OAAO,EAAE;AACnC,gBACM,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;AAC7B,oBAAQ,IAAI,CAAC,WAAW,GAAG,IAAI,KAAK,CAAC,gBAAgB,EAAE,iBAAiB,CAAC,CAAA;AACzE,iBAAO;AACP,gBACM,IAAI,cAAc,YAAK,IAAI,CAAC,WAAW,0CAAE,GAAG,CAAA,EAAE;AACpD,oBAAQ,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,cAAc,CAAA;AAC7C,iBAAO;AACP,gBACM,IAAI,gBAAgB,KAAK,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE;AACvD,oBAAQ,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,gBAAgB,CAAA;AACjD,iBAAO;AACP,gBACM,IAAI,iBAAiB,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;AACzD,oBAAQ,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,iBAAiB,CAAA;AACnD,iBAAO;AACP,gBACM,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAA;AAC1C,gBACM,WAAW,CAAC,MAAM,GAAG;AAC3B,oBAAQ,OAAO,CAAC,SAAS,CACf,WAAW,EACX,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,gBAAgB,GAAG,CAAC,EACvC,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,iBAAiB,GAAG,CAAC,EAAE,gBAAgB,EAAE,iBAAiB,CAC/E,CAAA;AACT,iBAAO,CAAA;AACP,aAAK;AACL;AAKG,KAJA;AACH;;ikBACA;AA1GkB,8CAA8B,GAA+B,GAAG,CAAA;AAChE,yCAAyB,GAAG,EAAE,CAAA,AAH3C;AAAC;EAJL,SAAS,SAAC,pBAIoC,YART,gBAAgB;AAAG;AAAG;gCAM1D,QAAQ,EAAE,1CALK,oBAad,KAAK,SAAC,QAAQ;SARW,eAC3B,xBAOuB,sBAGrB,KAAK,SAAC,eAAe;AAAO,mCAG5B,KAAK,SAAC,4BAA4B;AAAO,oBAEzC,KAAK;AAAK,qBACV,KAAK;AAAK,6BAGV,KAAK,SAAC,sBAAsB;AAAO,+BAEnC,KAAK,SAAC,wBAAwB;AAAO,gCAErC,KAAK,SAAC,yBAAyB;AAAO,qBAGtC,KAAK,SAAC,cAAc;AAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAAE;AAqF/B,SAAS,eAAe,CAAC,KAAkC,EAAE,YAAoB;AAAI,IACnF,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,EAAE,EAAE;AAC3C,QAAI,OAAO,YAAY,CAAA;AACvB,KAAG;AACH,IACE,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AACjC,QAAI,OAAO,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAA;AAC9B,KAAG;AACH,IACE,OAAO,KAAK,CAAA;AACd;AACA;AAAC,MC/GY,YAAY;AACzB;wCAdC,QAAQ,SAAC;MACR,YAAY,EAAE,sBACZ,eAAe,sBACf,eAAe,mBAChB,kBACD,OAAO;CAAE,sBACP;SAAY;aACb,kBACD,OAAO,EAAE,sBACP,eAAe,sBACf,eAAe,mBAChB,eACF;;;;;;;;;;;;;;;;0BACI;AAAC;AClBN;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AAC6B","sourcesContent":["import { Component, Input } from \"@angular/core\"\nimport { QrCodeErrorCorrectionLevel } from \"./types\"\n\n@Component({\n  selector: \"qr-code\",\n  template: `\n    <canvas *ngIf=\"value\"\n            [qrCode]=\"value\"\n            [qrCodeErrorCorrectionLevel]=\"errorCorrectionLevel\"\n            [qrCodeCenterImageSrc]=\"centerImageSrc\"\n            [qrCodeCenterImageWidth]=\"centerImageSize\"\n            [qrCodeCenterImageHeight]=\"centerImageSize\"\n            [qrCodeMargin]=\"margin\"\n            [width]=\"size\"\n            [height]=\"size\">\n    </canvas>\n  `,\n  styles: [],\n})\nexport class QrCodeComponent {\n\n  @Input()\n  value?: string\n\n  @Input()\n  size?: string | number\n\n  @Input()\n  errorCorrectionLevel?: QrCodeErrorCorrectionLevel\n\n  @Input()\n  centerImageSrc?: string\n\n  @Input()\n  centerImageSize?: string | number\n\n  @Input()\n  margin?: number\n\n}\n","import { Directive, Input, OnChanges, ViewContainerRef } from \"@angular/core\"\nimport qrcode from \"qrcode\"\nimport { QrCodeErrorCorrectionLevel } from \"./types\"\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: `canvas[qrCode]`,\n})\nexport class QrCodeDirective implements OnChanges {\n\n  static readonly DEFAULT_ERROR_CORRECTION_LEVEL: QrCodeErrorCorrectionLevel = \"M\"\n  static readonly DEFAULT_CENTER_IMAGE_SIZE = 40\n\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCode\") value!: string\n\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeVersion\") version?: number\n\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeErrorCorrectionLevel\") errorCorrectionLevel: QrCodeErrorCorrectionLevel = QrCodeDirective.DEFAULT_ERROR_CORRECTION_LEVEL\n\n  @Input() width?: number\n  @Input() height?: number\n\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeCenterImageSrc\") centerImageSrc?: string\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeCenterImageWidth\") centerImageWidth?: number | string\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeCenterImageHeight\") centerImageHeight?: number | string\n\n  // tslint:disable-next-line:no-input-rename\n  @Input(\"qrCodeMargin\") margin = 16\n\n  private centerImage?: HTMLImageElement\n\n  constructor(\n    private viewContainerRef: ViewContainerRef,\n  ) {\n  }\n\n  async ngOnChanges() {\n    if (!this.value) {\n      return\n    }\n\n    if (this.version && this.version > 40) {\n      console.warn(\"[qrCode] max version is 40, clamping\")\n      this.version = 40\n    } else if (this.version && this.version < 1) {\n      console.warn(\"[qrCode] min version is 1, clamping\")\n      this.version = 1\n    } else if (this.version !== undefined && isNaN(this.version)) {\n      console.warn(\"[qrCode] version should be set to a number, defaulting to auto\")\n      this.version = undefined\n    }\n\n    const canvas = this.viewContainerRef.element.nativeElement as HTMLCanvasElement | null\n\n    if (!canvas) {\n      // native element not available on server side rendering\n      return\n    }\n\n    const context = canvas.getContext(\"2d\")\n\n    if (context) {\n      context.clearRect(0, 0, context.canvas.width, context.canvas.height)\n    }\n\n    const errorCorrectionLevel = this.errorCorrectionLevel ?? QrCodeDirective.DEFAULT_ERROR_CORRECTION_LEVEL\n\n    await qrcode\n      .toCanvas(canvas, this.value, {\n        version: this.version,\n        errorCorrectionLevel,\n        width: this.width,\n        margin: this.margin,\n      })\n\n    const centerImageSrc = this.centerImageSrc\n    const centerImageWidth = getIntOrDefault(this.centerImageWidth, QrCodeDirective.DEFAULT_CENTER_IMAGE_SIZE)\n    const centerImageHeight = getIntOrDefault(this.centerImageHeight, QrCodeDirective.DEFAULT_CENTER_IMAGE_SIZE)\n\n    if (centerImageSrc && context) {\n\n      if (!this.centerImage) {\n        this.centerImage = new Image(centerImageWidth, centerImageHeight)\n      }\n\n      if (centerImageSrc !== this.centerImage?.src) {\n        this.centerImage.src = centerImageSrc\n      }\n\n      if (centerImageWidth !== this.centerImage.width) {\n        this.centerImage.width = centerImageWidth\n      }\n\n      if (centerImageHeight !== this.centerImage.height) {\n        this.centerImage.height = centerImageHeight\n      }\n\n      const centerImage = this.centerImage\n\n      centerImage.onload = () => {\n        context.drawImage(\n          centerImage,\n          canvas.width / 2 - centerImageWidth / 2,\n          canvas.height / 2 - centerImageHeight / 2, centerImageWidth, centerImageHeight,\n        )\n      }\n    }\n\n  }\n\n}\n\nfunction getIntOrDefault(value: string | number | undefined, defaultValue: number): number {\n  if (value === undefined || value === \"\") {\n    return defaultValue\n  }\n\n  if (typeof value === \"string\") {\n    return parseInt(value, 10)\n  }\n\n  return value\n}\n","import { CommonModule } from \"@angular/common\"\nimport { NgModule } from \"@angular/core\"\nimport { QrCodeComponent } from \"./qr-code.component\"\nimport { QrCodeDirective } from \"./qr-code.directive\"\n\n@NgModule({\n  declarations: [\n    QrCodeComponent,\n    QrCodeDirective,\n  ],\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    QrCodeComponent,\n    QrCodeDirective,\n  ],\n})\nexport class QrCodeModule {\n}\n","/*\n * Public API Surface of ng-qrcode\n */\n\nexport * from \"./lib/qr-code.component\"\nexport * from \"./lib/qr-code.directive\"\nexport * from \"./lib/qr-code.module\"\nexport * from \"./lib/types\"\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}