{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Package } from \"./package\";\nimport { NgxScannerQrcodeComponent } from \"ngx-scanner-qrcode\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-scanner-qrcode\";\nimport * as i2 from \"./package.service\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"../packageWarehouseInventory/package-warehouse-inventory.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/tooltip\";\nimport * as i7 from \"angularx-qrcode\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"primeng/button\";\nimport * as i10 from \"primeng/overlaypanel\";\nimport * as i11 from \"primeng/table\";\nimport * as i12 from \"./package-edit.component\";\nconst _c0 = [\"action\"];\nfunction PackageComponent_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1, \"\\u06A9\\u0627\\u0644\\u0627\\u06CC \\u0645\\u062F \\u0646\\u0638\\u0631 \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u0634\\u062F\\u0647 \\u0627\\u0633\\u062A\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageComponent_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"\\u231B Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageComponent_div_15_tr_13_qrcode_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"qrcode\", 27);\n  }\n  if (rf & 2) {\n    const entity_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"qrdata\", entity_r7.id)(\"errorCorrectionLevel\", \"M\")(\"colorLight\", \"#00000000\")(\"width\", 150)(\"cssClass\", \"bordered\");\n  }\n}\nfunction PackageComponent_div_15_tr_13_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"i\", 28);\n    i0.ɵɵlistener(\"click\", function PackageComponent_div_15_tr_13_ng_container_7_Template_i_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const entity_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.finishPackaging(entity_r7));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"i\", 29);\n    i0.ɵɵlistener(\"click\", function PackageComponent_div_15_tr_13_ng_container_7_Template_i_click_2_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const entity_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.cancelPackaging(entity_r7));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pTooltip\", \"\\u0627\\u062A\\u0645\\u0627\\u0645 \\u0628\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC\")(\"tooltipPosition\", \"top\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pTooltip\", \"\\u0644\\u063A\\u0648 \\u0628\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC\")(\"tooltipPosition\", \"top\");\n  }\n}\nfunction PackageComponent_div_15_tr_13_ng_template_12_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"span\", 33);\n    i0.ɵɵtext(2, \"\\u0646\\u0627\\u0645 \");\n    i0.ɵɵelement(3, \"p-sortIcon\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 35);\n    i0.ɵɵtext(5, \"\\u06AF\\u0631\\u0648\\u0647 \\u06A9\\u0627\\u0644\\u0627 \");\n    i0.ɵɵelement(6, \"p-sortIcon\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 37);\n    i0.ɵɵtext(8, \"\\u0648\\u0627\\u062D\\u062F \\u06A9\\u0627\\u0644\\u0627 \");\n    i0.ɵɵelement(9, \"p-sortIcon\", 38);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PackageComponent_div_15_tr_13_ng_template_12_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"span\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const rowData_r20 = ctx.$implicit;\n    const packageWarehouseInventory_r21 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", rowData_r20);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(packageWarehouseInventory_r21.warehouseInventory.ware.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(packageWarehouseInventory_r21.warehouseInventory.ware.wareType.label);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(packageWarehouseInventory_r21.warehouseInventory.ware.wareUnit.label);\n  }\n}\nfunction PackageComponent_div_15_tr_13_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-table\", 30);\n    i0.ɵɵlistener(\"selectionChange\", function PackageComponent_div_15_tr_13_ng_template_12_Template_p_table_selectionChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.selectedProduct = $event);\n    })(\"onRowSelect\", function PackageComponent_div_15_tr_13_ng_template_12_Template_p_table_onRowSelect_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r24 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r24.onRowSelect($event));\n    });\n    i0.ɵɵtemplate(1, PackageComponent_div_15_tr_13_ng_template_12_ng_template_1_Template, 10, 0, \"ng-template\", 31);\n    i0.ɵɵtemplate(2, PackageComponent_div_15_tr_13_ng_template_12_ng_template_2_Template, 7, 4, \"ng-template\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"value\", ctx_r11.packageWarehouseInventory)(\"selection\", ctx_r11.selectedProduct)(\"paginator\", true)(\"rows\", 5);\n  }\n}\nconst _c1 = function () {\n  return {\n    width: \"450px\"\n  };\n};\nfunction PackageComponent_div_15_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 17);\n    i0.ɵɵtemplate(2, PackageComponent_div_15_tr_13_qrcode_2_Template, 1, 5, \"qrcode\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 20);\n    i0.ɵɵelement(4, \"i\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"input\", 22);\n    i0.ɵɵlistener(\"click\", function PackageComponent_div_15_tr_13_Template_input_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r26);\n      const entity_r7 = restoredCtx.$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.selectPackage(entity_r7));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, PackageComponent_div_15_tr_13_ng_container_7_Template, 3, 4, \"ng-container\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"p-button\", 23);\n    i0.ɵɵlistener(\"click\", function PackageComponent_div_15_tr_13_Template_p_button_click_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r26);\n      const entity_r7 = restoredCtx.$implicit;\n      const _r10 = i0.ɵɵreference(11);\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      ctx_r27.getPackageWarehouseInventory(entity_r7.id);\n      return i0.ɵɵresetView(_r10.toggle($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p-overlayPanel\", 24, 25);\n    i0.ɵɵtemplate(12, PackageComponent_div_15_tr_13_ng_template_12_Template, 3, 4, \"ng-template\", 26);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const entity_r7 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r6.selectedPackageId == entity_r7.id ? \"selectedPackage\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", entity_r7.id != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(entity_r7.status ? \"text-success\" : \"text-danger\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(entity_r7.status ? \"fa-box-open\" : \"fa-box-archive\");\n    i0.ɵɵproperty(\"pTooltip\", entity_r7.status ? \"\\u0628\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC \\u0628\\u0627\\u0632 \\u0627\\u0633\\u062A\" : \"\\u0628\\u0633\\u062A\\u0647 \\u0628\\u0646\\u062F\\u06CC \\u0628\\u0633\\u062A\\u0647 \\u0627\\u0633\\u062A\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", entity_r7.isSelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", entity_r7.id != undefined && entity_r7.id == ctx_r6.selectedPackageId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(13, _c1));\n    i0.ɵɵproperty(\"showCloseIcon\", true);\n  }\n}\nfunction PackageComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\", 15)(2, \"thead\", 16)(3, \"tr\")(4, \"th\", 17);\n    i0.ɵɵtext(5, \"\\u0631\\u0645\\u0632\\u06CC\\u0646\\u0647\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 17);\n    i0.ɵɵtext(7, \"\\u0648\\u0636\\u0639\\u06CC\\u062A\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 17);\n    i0.ɵɵtext(9, \"\\u0639\\u0645\\u0644\\u06CC\\u062A\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 17);\n    i0.ɵɵtext(11, \"\\u0645\\u062D\\u062A\\u0648\\u06CC\\u0627\\u062A\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\", 16);\n    i0.ɵɵtemplate(13, PackageComponent_div_15_tr_13_Template, 13, 14, \"tr\", 18);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.packages);\n  }\n}\nfunction PackageComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-package-edit\");\n  }\n}\nexport class PackageComponent {\n  constructor(qrcode, packageService, confirmationService, packageWarehouseInventoryService) {\n    this.qrcode = qrcode;\n    this.packageService = packageService;\n    this.confirmationService = confirmationService;\n    this.packageWarehouseInventoryService = packageWarehouseInventoryService;\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    this.config = {\n      // fps: 1000,\n      vibrate: 400,\n      // isBeep: true,\n      // decode: 'macintosh',\n      deviceActive: 1,\n      constraints: {\n        audio: false,\n        video: {\n          width: 300\n        }\n      }\n    };\n    this.qrCodeResult = [];\n    this.qrCodeResult2 = [];\n    this.action = new NgxScannerQrcodeComponent();\n    this.editMode = false;\n    this.selectedPackage = new EventEmitter();\n    this.finishedPackaging = new EventEmitter();\n    this.checkSelectedWarehouseInventory = new EventEmitter();\n    this.selectedPackageId = '';\n    this.selectedPackageWarehouseInventoryId = '';\n    this.sendToPackage = true;\n    this.packageWarehouseInventory = [];\n  }\n  ngAfterContentInit() {\n    // if (this.action != undefined) { // @ts-ignore\n    //   setTimeout(() => this.action.start(), 1000);\n    // }\n  }\n  onEvent(e) {\n    if (e.length > 0 && this.selectedPackageWarehouseInventoryId != e[0].value) {\n      this.selectedPackageWarehouseInventoryId = e[0].value;\n      console.log(this.selectedPackageWarehouseInventoryId);\n      if (this.sendToPackage && this.selectedPackageId != '') {\n        this.addWarehouseInventoryToPackage(this.selectedPackageId, this.selectedPackageWarehouseInventoryId);\n        this.sendToPackage = false;\n      }\n      // this.action.stop();\n    }\n  }\n\n  handle(action, fn) {\n    action[fn]().subscribe(console.log, alert);\n  }\n  onDowload(action) {\n    action.download().subscribe(console.log, alert);\n  }\n  onSelects(files) {\n    this.qrcode.loadFiles(files).subscribe(res => {\n      this.qrCodeResult = res;\n    });\n  }\n  onSelects2(files) {\n    this.qrcode.loadFilesToScan(files, this.config).subscribe(res => {\n      console.log(res);\n      this.qrCodeResult2 = res;\n    });\n  }\n  ngOnInit() {\n    this.onLoad();\n  }\n  getPackageWarehouseInventory(packageWarehouseInventoryId = '') {\n    this.packageWarehouseInventoryService.getPackageWarehouseInventory(packageWarehouseInventoryId).subscribe(value => {\n      this.packageWarehouseInventory = value;\n      console.log(this.packageWarehouseInventory);\n    });\n  }\n  onLoad() {\n    this.packageService.getAllPackage().subscribe(packages => {\n      if (packages.length > 0) {\n        this.packages = packages;\n      } else {\n        this.editMode = true;\n      }\n    });\n  }\n  selectPackage(entity) {\n    entity.isSelected = true;\n    if (entity.id != undefined) {\n      this.selectedPackageId = entity.id;\n    }\n    this.selectedPackage.emit(entity);\n    if (this.action != undefined) {\n      // @ts-ignore\n      setTimeout(() => this.action.start(), 1000);\n    }\n  }\n  cancelPackaging(entity) {\n    entity.isSelected = false;\n    this.selectedPackageId = '';\n    this.selectedPackage.emit(new Package());\n  }\n  finishPackaging(entity) {\n    this.confirmationService.confirm({\n      message: 'آیا با اتمام بسته بندی موافق هستید؟',\n      // header: 'Confirmation',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.finishedPackaging.emit(entity);\n        entity.status = false;\n        this.packageService.savePackage(entity).subscribe(value => {\n          this.onLoad();\n        });\n        // this.packageService.\n        // this.msgs = [{severity:'info', summary:'Confirmed', detail:'You have accepted'}];\n      },\n\n      reject: () => {\n        // this.msgs = [{severity:'info', summary:'Rejected', detail:'You have rejected'}];\n      }\n    });\n    // this.checkSelectedWarehouseInventory.emit('');\n  }\n\n  createNewPackage() {\n    this.newPackage = new Package();\n    this.newPackage.status = true;\n    this.packageService.savePackage(this.newPackage).subscribe(newPackage => {\n      this.onLoad();\n    });\n  }\n  addWarehouseInventoryToPackage(packageId, warehouseInventoryId) {\n    let packageWarehouseInventory = {\n      packageId: packageId,\n      warehouseInventoryId: warehouseInventoryId\n    };\n    this.packageService.addWarehouseInventoryToPackage(packageWarehouseInventory).subscribe(result => {\n      console.log(result);\n      this.sendToPackage = false;\n    }, error => {\n      console.log(error);\n      this.sendToPackage = true;\n    });\n  }\n  onRowSelect($event) {}\n}\nPackageComponent.ɵfac = function PackageComponent_Factory(t) {\n  return new (t || PackageComponent)(i0.ɵɵdirectiveInject(i1.NgxScannerQrcodeService), i0.ɵɵdirectiveInject(i2.PackageService), i0.ɵɵdirectiveInject(i3.ConfirmationService), i0.ɵɵdirectiveInject(i4.PackageWarehouseInventoryService));\n};\nPackageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PackageComponent,\n  selectors: [[\"app-package\"]],\n  viewQuery: function PackageComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.action = _t.first);\n    }\n  },\n  outputs: {\n    selectedPackage: \"selectedPackage\",\n    finishedPackaging: \"finishedPackaging\",\n    checkSelectedWarehouseInventory: \"checkSelectedWarehouseInventory\"\n  },\n  decls: 19,\n  vars: 21,\n  consts: [[1, \"m-3\", \"p-2\"], [1, \"bg-light\"], [1, \"fa\", \"fa-plus-square\", \"fa-2x\", \"col-1\", \"offset-11\", 3, \"click\"], [1, \"row\"], [1, \"col-4\"], [3, \"config\", \"event\"], [\"action\", \"scanner\"], [1, \"col-8\"], [\"class\", \"data\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"btn\", 3, \"pTooltip\", \"disabled\", \"click\"], [1, \"bi\", \"fw-bold\"], [4, \"ngIf\", \"ngIfElse\"], [\"editModes\", \"\"], [1, \"data\"], [1, \"table\", \"table-striped\", \"table-bordered\", \"table-hover\"], [1, \"table-responsive\"], [1, \"\"], [3, \"class\", 4, \"ngFor\", \"ngForOf\"], [\"style\", \"\", 3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\", 4, \"ngIf\"], [1, \"fw-bold\"], [1, \"fa\", 3, \"pTooltip\"], [\"type\", \"radio\", \"name\", \"selectedPackage\", 1, \"mx-1\", \"fa-bo\", \"x\", 3, \"value\", \"click\"], [\"icon\", \"pi pi-search\", 3, \"click\"], [3, \"showCloseIcon\"], [\"op\", \"\"], [\"pTemplate\", \"\"], [3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\"], [1, \"pi\", \"pi-check\", \"mx-1\", 3, \"pTooltip\", \"tooltipPosition\", \"click\"], [1, \"pi\", \"pi-times\", \"mx-1\", 3, \"pTooltip\", \"tooltipPosition\", \"click\"], [\"selectionMode\", \"single\", \"responsiveLayout\", \"scroll\", 3, \"value\", \"selection\", \"paginator\", \"rows\", \"selectionChange\", \"onRowSelect\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pSortableColumn\", \"name\", 1, \"col-4\"], [\"field\", \"name\"], [\"pSortableColumn\", \"wareType\", 1, \"col-4\"], [\"field\", \"wareType\"], [\"pSortableColumn\", \"wareUnit\", 1, \"col-4\"], [\"field\", \"wareUnit\"], [1, \"row\", 3, \"pSelectableRow\"]],\n  template: function PackageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r28 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"i\", 2);\n      i0.ɵɵlistener(\"click\", function PackageComponent_Template_i_click_2_listener() {\n        return ctx.createNewPackage();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4)(5, \"ngx-scanner-qrcode\", 5, 6);\n      i0.ɵɵlistener(\"event\", function PackageComponent_Template_ngx_scanner_qrcode_event_5_listener($event) {\n        return ctx.onEvent($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 7);\n      i0.ɵɵtemplate(8, PackageComponent_p_8_Template, 2, 0, \"p\", 8);\n      i0.ɵɵtemplate(9, PackageComponent_p_9_Template, 2, 0, \"p\", 9);\n      i0.ɵɵelementStart(10, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function PackageComponent_Template_button_click_10_listener() {\n        i0.ɵɵrestoreView(_r28);\n        const _r0 = i0.ɵɵreference(6);\n        return i0.ɵɵresetView(ctx.handle(_r0, _r0.isStart ? \"stop\" : \"start\"));\n      });\n      i0.ɵɵelement(11, \"i\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n\\u200C \");\n      i0.ɵɵelementStart(13, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function PackageComponent_Template_button_click_13_listener() {\n        i0.ɵɵrestoreView(_r28);\n        const _r0 = i0.ɵɵreference(6);\n        return i0.ɵɵresetView(ctx.handle(_r0, _r0.isPause ? \"play\" : \"pause\"));\n      });\n      i0.ɵɵelement(14, \"i\", 11);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(15, PackageComponent_div_15_Template, 14, 1, \"div\", 12);\n      i0.ɵɵelement(16, \"p-confirmDialog\");\n      i0.ɵɵtemplate(17, PackageComponent_ng_template_17_Template, 1, 0, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(6);\n      const _r4 = i0.ɵɵreference(18);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"config\", ctx.config);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.sendToPackage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r0.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassProp(\"btn-info\", !_r0.isStart)(\"btn-warning\", _r0.isStart);\n      i0.ɵɵproperty(\"pTooltip\", _r0.isStart ? \"\" : \"\\u062A\\u0648\\u0642\\u0641 \\u062E\\u0648\\u0627\\u0646\\u0634\")(\"disabled\", _r0.isLoading || !_r0.isStart);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMap(_r0.isStart ? \"bi-camera-video-off\" : \"bi-camera-video\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassProp(\"btn-info\", !_r0.isStart)(\"btn-warning\", _r0.isStart);\n      i0.ɵɵproperty(\"pTooltip\", !_r0.isPause && _r0.isStart ? \"\" : \"\\u0645\\u06A9\\u062B \\u062E\\u0648\\u0627\\u0646\\u0634\")(\"disabled\", !_r0.isStart);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMap(_r0.isPause ? \"bi-play-circle\" : \"bi-pause-circle\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editMode)(\"ngIfElse\", _r4);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i3.PrimeTemplate, i6.Tooltip, i7.QRCodeComponent, i1.NgxScannerQrcodeComponent, i8.ConfirmDialog, i9.Button, i10.OverlayPanel, i11.Table, i11.SortableColumn, i11.SelectableRow, i11.SortIcon, i12.PackageEditComponent],\n  styles: [\".selectedPackage[_ngcontent-%COMP%] {\\r\\n  background-color: darkgray;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFja2FnZS9wYWNrYWdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSwwQkFBMEI7QUFDNUIiLCJzb3VyY2VzQ29udGVudCI6WyIuc2VsZWN0ZWRQYWNrYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZ3JheTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","Package","NgxScannerQrcodeComponent","i0","ctx_r27","PackageComponent","constructor","qrcode","packageService","confirmationService","packageWarehouseInventoryService","vibrate","deviceActive","constraints","audio","video","width","ngAfterContentInit","onEvent","e","length","selectedPackageWarehouseInventoryId","value","console","log","sendToPackage","selectedPackageId","addWarehouseInventoryToPackage","handle","action","fn","subscribe","alert","onDowload","download","onSelects","files","loadFiles","res","qrCodeResult","onSelects2","loadFilesToScan","config","qrCodeResult2","ngOnInit","onLoad","getPackageWarehouseInventory","packageWarehouseInventoryId","packageWarehouseInventory","getAllPackage","packages","editMode","selectPackage","entity","isSelected","id","undefined","selectedPackage","emit","setTimeout","start","cancelPackaging","finishPackaging","confirm","message","icon","accept","finishedPackaging","status","savePackage","reject","createNewPackage","newPackage","packageId","warehouseInventoryId","result","error","onRowSelect","$event","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["D:\\wamp64\\www\\warehouseMicroService\\warehouseUi0\\src\\app\\package\\package.component.ts","D:\\wamp64\\www\\warehouseMicroService\\warehouseUi0\\src\\app\\package\\package.component.html"],"sourcesContent":["import {AfterContentInit, Component, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {PackageService} from './package.service';\r\nimport {Package} from \"./package\";\r\nimport {ConfirmationService} from \"primeng/api\";\r\nimport {\r\n  NgxScannerQrcodeComponent,\r\n  NgxScannerQrcodeService,\r\n  ScannerQRCodeConfig,\r\n  ScannerQRCodeResult,\r\n  ScannerQRCodeSelectedFiles\r\n} from \"ngx-scanner-qrcode\";\r\nimport {PackageWarehouseInventory} from \"../packageWarehouseInventory/package-warehouse-inventory\";\r\nimport {PackageWarehouseInventoryService} from \"../packageWarehouseInventory/package-warehouse-inventory.service\";\r\nimport {OverlayPanel} from \"primeng/overlaypanel\";\r\n\r\n@Component({\r\n  selector: 'app-package',\r\n  templateUrl: './package.component.html',\r\n  styleUrls: ['./package.component.css']\r\n})\r\nexport class PackageComponent implements OnInit, AfterContentInit {\r\n\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n  public config: ScannerQRCodeConfig = {\r\n    // fps: 1000,\r\n    vibrate: 400,\r\n    // isBeep: true,\r\n    // decode: 'macintosh',\r\n    deviceActive: 1,\r\n    constraints: {\r\n      audio: false,\r\n      video: {\r\n        width: 300\r\n      }\r\n    }\r\n  };\r\n\r\n  public qrCodeResult: ScannerQRCodeSelectedFiles[] = [];\r\n  public qrCodeResult2: ScannerQRCodeSelectedFiles[] = [];\r\n\r\n  @ViewChild('action') action: NgxScannerQrcodeComponent = new NgxScannerQrcodeComponent();\r\n\r\n  public packages?: Package[];\r\n  public newPackage?: Package;\r\n  public editMode = false;\r\n  @Output() selectedPackage: EventEmitter<Package> = new EventEmitter();\r\n  @Output() finishedPackaging: EventEmitter<Package> = new EventEmitter();\r\n  @Output() checkSelectedWarehouseInventory: EventEmitter<string> = new EventEmitter();\r\n  public selectedPackageId = '';\r\n  public selectedPackageWarehouseInventoryId = '';\r\n  public sendToPackage = true;\r\n  packageWarehouseInventory: PackageWarehouseInventory[] = [];\r\n  selectedProduct: any;\r\n\r\n  constructor(\r\n    private qrcode: NgxScannerQrcodeService,\r\n    private packageService: PackageService,\r\n    private confirmationService: ConfirmationService,\r\n    private packageWarehouseInventoryService: PackageWarehouseInventoryService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterContentInit(): void {\r\n    // if (this.action != undefined) { // @ts-ignore\r\n    //   setTimeout(() => this.action.start(), 1000);\r\n    // }\r\n  }\r\n\r\n  public onEvent(e: ScannerQRCodeResult[]): void {\r\n    if (e.length > 0 && this.selectedPackageWarehouseInventoryId != e[0].value) {\r\n      this.selectedPackageWarehouseInventoryId = e[0].value;\r\n      console.log(this.selectedPackageWarehouseInventoryId);\r\n      if (this.sendToPackage && this.selectedPackageId != '') {\r\n        this.addWarehouseInventoryToPackage(this.selectedPackageId, this.selectedPackageWarehouseInventoryId);\r\n        this.sendToPackage = false;\r\n      }\r\n      // this.action.stop();\r\n    }\r\n  }\r\n\r\n  public handle(action: any, fn: string): void {\r\n    action[fn]().subscribe(console.log, alert);\r\n  }\r\n\r\n  public onDowload(action: any): void {\r\n    action.download().subscribe(console.log, alert);\r\n  }\r\n\r\n  public onSelects(files: any): void {\r\n    this.qrcode.loadFiles(files).subscribe((res: ScannerQRCodeSelectedFiles[]) => {\r\n      this.qrCodeResult = res;\r\n    });\r\n  }\r\n\r\n  public onSelects2(files: any): void {\r\n    this.qrcode.loadFilesToScan(files, this.config).subscribe((res: ScannerQRCodeSelectedFiles[]) => {\r\n      console.log(res);\r\n      this.qrCodeResult2 = res;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.onLoad();\r\n  }\r\n\r\n  getPackageWarehouseInventory(packageWarehouseInventoryId: string = ''): void {\r\n    this.packageWarehouseInventoryService.getPackageWarehouseInventory(packageWarehouseInventoryId).subscribe(value => {\r\n      this.packageWarehouseInventory = value;\r\n      console.log(this.packageWarehouseInventory);\r\n    });\r\n  }\r\n\r\n  private onLoad() {\r\n    this.packageService.getAllPackage().subscribe(packages => {\r\n      if (packages.length > 0) {\r\n        this.packages = packages;\r\n      } else {\r\n        this.editMode = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  selectPackage(entity: Package) {\r\n    entity.isSelected = true;\r\n    if (entity.id != undefined) {\r\n      this.selectedPackageId = entity.id;\r\n    }\r\n    this.selectedPackage.emit(entity);\r\n    if (this.action != undefined) { // @ts-ignore\r\n      setTimeout(() => this.action.start(), 1000);\r\n    }\r\n  }\r\n\r\n  cancelPackaging(entity: Package) {\r\n    entity.isSelected = false;\r\n    this.selectedPackageId = '';\r\n    this.selectedPackage.emit(new Package());\r\n  }\r\n\r\n  finishPackaging(entity: Package) {\r\n    this.confirmationService.confirm({\r\n      message: 'آیا با اتمام بسته بندی موافق هستید؟',\r\n      // header: 'Confirmation',\r\n      icon: 'pi pi-exclamation-triangle',\r\n      accept: () => {\r\n        this.finishedPackaging.emit(entity);\r\n        entity.status = false;\r\n        this.packageService.savePackage(entity).subscribe(value => {\r\n          this.onLoad();\r\n        });\r\n        // this.packageService.\r\n        // this.msgs = [{severity:'info', summary:'Confirmed', detail:'You have accepted'}];\r\n      },\r\n      reject: () => {\r\n        // this.msgs = [{severity:'info', summary:'Rejected', detail:'You have rejected'}];\r\n      }\r\n    });\r\n    // this.checkSelectedWarehouseInventory.emit('');\r\n  }\r\n\r\n  createNewPackage() {\r\n    this.newPackage = new Package();\r\n    this.newPackage.status = true;\r\n    this.packageService.savePackage(this.newPackage).subscribe(newPackage => {\r\n      this.onLoad();\r\n    });\r\n  }\r\n\r\n  addWarehouseInventoryToPackage(packageId: string, warehouseInventoryId: string) {\r\n    let packageWarehouseInventory: PackageWarehouseInventory = {\r\n      packageId: packageId,\r\n      warehouseInventoryId: warehouseInventoryId\r\n    }\r\n    this.packageService.addWarehouseInventoryToPackage(packageWarehouseInventory).subscribe(result => {\r\n      console.log(result);\r\n      this.sendToPackage = false;\r\n    }, error => {\r\n      console.log(error);\r\n      this.sendToPackage = true;\r\n    });\r\n  }\r\n\r\n  onRowSelect($event: any) {\r\n\r\n  }\r\n}\r\n","<div class=\"m-3 p-2\">\r\n  <div class=\"bg-light\">\r\n    <i class=\"fa fa-plus-square fa-2x col-1 offset-11\" (click)=\"createNewPackage()\"></i>\r\n    <!--    <ngx-scanner-qrcode #action=\"scanner\" [src]=\"'https://domain.com/test.png'\"></ngx-scanner-qrcode>-->\r\n\r\n    <!-- data  -->\r\n    <!--    <span>{{ action.data.value | json }}</span>&lt;!&ndash; value &ndash;&gt;-->\r\n    <!--    <span>{{ action.data | async | json }}</span>&lt;!&ndash; async &ndash;&gt;-->\r\n\r\n    <!-- Loading -->\r\n    <!--    <p *ngIf=\"action.isLoading\">⌛ Loading...</p>-->\r\n\r\n    <!-- start -->\r\n    <!--    <button (click)=\"action.isStart ? action.stop() : action.start()\">{{action.isStart ? 'Stop' : 'Start'}}</button>-->\r\n\r\n\r\n    <!--     ngx-scanner-qrcode -->\r\n    <div class=\"row\">\r\n      <div class=\"col-4\">\r\n        <ngx-scanner-qrcode #action=\"scanner\" [config]=\"config\" (event)=\"onEvent($event)\"></ngx-scanner-qrcode>\r\n      </div>\r\n      <div class=\"col-8\">\r\n        <!--    &lt;!&ndash; data  &ndash;&gt;-->\r\n        <!--        <p class=\"data\">{{ (action.data | async | json) }}</p>-->\r\n        <p class=\"data\" *ngIf=\"!sendToPackage\">کالای مد نظر انتخاب شده است</p>\r\n<!--        <button *ngIf=\"!sendToPackage\" (click)=\"selectedPackageId = ''; sendToPackage = true\" class=\"btn btn-danger\">حذف-->\r\n<!--          کالا-->\r\n<!--        </button>-->\r\n\r\n        <!--    &lt;!&ndash; loading &ndash;&gt;-->\r\n        <p *ngIf=\"action.isLoading\">⌛ Loading...</p>\r\n\r\n        <!--    &lt;!&ndash; start/stop &ndash;&gt;-->\r\n        <button class=\"btn\" [class.btn-info]=\"!action.isStart\"\r\n                [class.btn-warning]=\"action.isStart\"\r\n                [pTooltip]=\"action.isStart ? '' : 'توقف خوانش'\"\r\n                [disabled]=\"action.isLoading || !action.isStart\" (click)=\"handle(action, action.isStart ? 'stop' : 'start')\">\r\n          <i class=\"bi fw-bold\" [class]=\"action.isStart ? 'bi-camera-video-off' : 'bi-camera-video'\"></i>\r\n        </button>\r\n&zwnj;\r\n        <!--    &lt;!&ndash; play/pause &ndash;&gt;-->\r\n        <button class=\"btn\" [class.btn-info]=\"!action.isStart\"\r\n                [class.btn-warning]=\"action.isStart\"\r\n                [pTooltip]=\"!action.isPause && action.isStart ? '' : 'مکث خوانش'\"\r\n                [disabled]=\"!action.isStart\" (click)=\"handle(action, action.isPause ? 'play' : 'pause')\">\r\n          <i class=\"bi fw-bold\" [class]=\"action.isPause ? 'bi-play-circle' : 'bi-pause-circle'\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!--    &lt;!&ndash; isTorch &ndash;&gt;-->\r\n    <!-- <button class=\"btn\" [class.btn-info]=\"!action.isStart\" [class.btn-warning]=\"action.isStart\" [disabled]=\"!action.isStart\" (click)=\"action.isTorch = !action.isTorch; handle(action, 'torcher')\">\r\n       <img [src]=\"action.isTorch ? 'https://id1945.github.io/images/svg/flash-off.svg' : 'https://id1945.github.io/images/svg/flash-on.svg'\" width=\"30px\"/>\r\n     </button>-->\r\n\r\n    <!--    &lt;!&ndash; download &ndash;&gt;-->\r\n    <!-- <button class=\"btn\" [class.btn-info]=\"!action.isStart\" [class.btn-warning]=\"action.isStart\" [disabled]=\"!action.isStart\" (click)=\"onDowload(action)\">\r\n &lt;!&ndash;      <img src=\"https://id1945.github.io/images/svg/capture.svg\" width=\"30px\"/>&ndash;&gt;\r\n     </button>-->\r\n\r\n    <div *ngIf=\"!editMode; else editModes\">\r\n      <table class=\"table table-striped table-bordered table-hover\">\r\n        <thead class=\"table-responsive\">\r\n        <tr>\r\n          <th class=\"\">رمزینه</th>\r\n          <!--      <th class=\"\">رنگ</th>-->\r\n          <th class=\"\">وضعیت</th>\r\n          <th class=\"\">عملیت</th>\r\n          <th class=\"\">محتویات</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody class=\"table-responsive\">\r\n        <tr *ngFor=\"let entity of packages\" [class]=\"selectedPackageId == entity.id ? 'selectedPackage' : ''\">\r\n          <td class=\"\">\r\n            <qrcode [qrdata]=\"entity.id\"\r\n                    *ngIf=\"entity.id != undefined\"\r\n                    [errorCorrectionLevel]=\"'M'\"\r\n                    [colorLight]=\"'#00000000'\"\r\n                    [width]=\"150\"\r\n                    style=\"\"\r\n                    [cssClass]=\"'bordered'\"\r\n            ></qrcode>\r\n          </td>\r\n          <!--      <td class=\"\"> <input type=\"color\" [value]=\"entity.color\"></td>-->\r\n          <td [class]=\"entity.status ? 'text-success' : 'text-danger'\" class=\"fw-bold\">\r\n            <i [class]=\"entity.status ? 'fa-box-open' : 'fa-box-archive'\" class=\"fa\" [pTooltip]=\"entity.status ? 'بسته بندی باز است' : 'بسته بندی بسته است'\"></i>\r\n          </td>\r\n          <td>\r\n            <input type=\"radio\"\r\n                   class=\"mx-1 fa-bo x\"\r\n                   [value]=\"entity.isSelected\"\r\n                   (click)=\"selectPackage(entity)\"\r\n                   name=\"selectedPackage\">\r\n            <!--        <i class=\"pi pi-pencil circle mx-1\" *ngIf=\"entity.id != selectedPackageId\"></i>-->\r\n            <ng-container *ngIf=\"entity.id != undefined && entity.id == selectedPackageId\">\r\n              <i class=\"pi pi-check mx-1\" [pTooltip]=\"'اتمام بسته بندی'\" [tooltipPosition]=\"'top'\"\r\n                 (click)=\"finishPackaging(entity)\"></i>\r\n              <i class=\"pi pi-times mx-1\" [pTooltip]=\"'لغو بسته بندی'\" [tooltipPosition]=\"'top'\"\r\n                 (click)=\"cancelPackaging(entity)\"></i>\r\n<!--              <input type=\"text\" (keydown.enter)=\"addWarehouseInventoryToPackage(entity.id, selectedWare.value)\"-->\r\n<!--                     #selectedWare>-->\r\n<!--              <i class=\"fa fa-plus\" (keydown.enter)=\"addWarehouseInventoryToPackage(entity.id, selectedWare.value)\"></i>-->\r\n            </ng-container>\r\n            <!--        <i class=\"fa fa-plus\" [pTooltip]=\"'افزودن کالا به بسته بندی'\"></i>-->\r\n          </td>\r\n          <td>\r\n            <!--          <td (click)=\"getPackageWarehouseInventory(entity.id)\">-->\r\n            <p-button icon=\"pi pi-search\"\r\n                      (click)=\"getPackageWarehouseInventory(entity.id); op.toggle($event)\"></p-button>\r\n            <p-overlayPanel #op [showCloseIcon]=\"true\" [style]=\"{width: '450px'}\">\r\n              <ng-template pTemplate>\r\n                <p-table [value]=\"packageWarehouseInventory\" selectionMode=\"single\" [(selection)]=\"selectedProduct\"\r\n                         (onRowSelect)=\"onRowSelect($event)\" [paginator]=\"true\" [rows]=\"5\" responsiveLayout=\"scroll\">\r\n                  <ng-template pTemplate=\"header\">\r\n                    <div class=\"row\">\r\n                      <span class=\"col-4\" pSortableColumn=\"name\">نام\r\n                        <p-sortIcon field=\"name\"></p-sortIcon>\r\n                      </span>\r\n                      <span class=\"col-4\" pSortableColumn=\"wareType\">گروه کالا\r\n                        <p-sortIcon field=\"wareType\"></p-sortIcon>\r\n                      </span>\r\n                      <span class=\"col-4\" pSortableColumn=\"wareUnit\">واحد کالا\r\n                        <p-sortIcon field=\"wareUnit\"></p-sortIcon>\r\n                      </span>\r\n                      <!--                      <span class=\"col-3\" pSortableColumn=\"wareGroup\">گروه کالا-->\r\n                      <!--                        <p-sortIcon field=\"price\"></p-sortIcon>-->\r\n                      <!--                      </span>-->\r\n                    </div>\r\n                  </ng-template>\r\n                  <ng-template pTemplate=\"body\" let-rowData let-packageWarehouseInventory>\r\n                    <div class=\"row\" [pSelectableRow]=\"rowData\">\r\n                      <span class=\"col-4\">{{packageWarehouseInventory.warehouseInventory.ware.name}}</span>\r\n                      <span class=\"col-4\">{{packageWarehouseInventory.warehouseInventory.ware.wareType.label}}</span>\r\n                      <span class=\"col-4\">{{packageWarehouseInventory.warehouseInventory.ware.wareUnit.label}}</span>\r\n                      <!--                      <span>-->\r\n                      <!--                        <img src=\"https://primefaces.org/cdn/primeng/images/demo/product/{{packageWarehouseInventory.image}}\"-->\r\n                      <!--                               [alt]=\"packageWarehouseInventory.image\" class=\"product-image\"/>-->\r\n                      <!--                      </span>-->\r\n                    </div>\r\n                  </ng-template>\r\n                </p-table>\r\n              </ng-template>\r\n            </p-overlayPanel>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <p-confirmDialog></p-confirmDialog>\r\n    <ng-template #editModes\r\n    >\r\n      <app-package-edit></app-package-edit>\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}