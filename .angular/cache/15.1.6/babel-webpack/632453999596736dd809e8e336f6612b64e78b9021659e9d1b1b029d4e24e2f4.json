{"ast":null,"code":"import { PackageWarehouseInventory } from \"../packageWarehouseInventory/package-warehouse-inventory\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./warehouse-inventory.service\";\nimport * as i2 from \"../packageWarehouseInventory/package-warehouse-inventory.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"angularx-qrcode\";\nimport * as i6 from \"primeng/messages\";\nimport * as i7 from \"../general/utility/header-tools/header-tools.component\";\nimport * as i8 from \"../package/package.component\";\nconst _c0 = [\"packageComponent\"];\nfunction WarehouseInventoryComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" \\u0628\\u0633\\u062A\\u0647 \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u0634\\u062F\\u0647 \");\n    i0.ɵɵelement(2, \"input\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r0.selectedPackageColor);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_qrcode_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"qrcode\", 19);\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"qrdata\", warehouseInventory_r4.id)(\"errorCorrectionLevel\", \"M\")(\"colorLight\", \"#00000000\")(\"width\", 150)(\"cssClass\", \"bordered\");\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_input_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function WarehouseInventoryComponent_article_8_tr_17_input_12_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(warehouseInventory_r4.isSelected = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"name\", warehouseInventory_r4.id)(\"ngModel\", warehouseInventory_r4.isSelected);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_i_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 21);\n    i0.ɵɵlistener(\"click\", function WarehouseInventoryComponent_article_8_tr_17_i_13_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.openPackage());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 11)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, WarehouseInventoryComponent_article_8_tr_17_qrcode_10_Template, 1, 5, \"qrcode\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtemplate(12, WarehouseInventoryComponent_article_8_tr_17_input_12_Template, 1, 2, \"input\", 16);\n    i0.ɵɵtemplate(13, WarehouseInventoryComponent_article_8_tr_17_i_13_Template, 1, 0, \"i\", 17);\n    i0.ɵɵelement(14, \"i\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.wareName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.warehouseTitle, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.serial, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.expirationDate ? warehouseInventory_r4.expirationDate : \"\\u0646\\u062F\\u0627\\u0631\\u062F\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", warehouseInventory_r4.id != undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.originLocation == \"export\" && ctx_r2.showPackages && warehouseInventory_r4.id != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.originLocation == \"export\" && !ctx_r2.showPackages);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"app-package\", 23, 24);\n    i0.ɵɵlistener(\"selectedPackage\", function WarehouseInventoryComponent_article_8_div_19_Template_app_package_selectedPackage_1_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.getPackage($event));\n    })(\"finishedPackaging\", function WarehouseInventoryComponent_article_8_div_19_Template_app_package_finishedPackaging_1_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.finishedPackaging($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction WarehouseInventoryComponent_article_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"article\", 9)(1, \"table\", 10)(2, \"thead\")(3, \"tr\", 11)(4, \"th\");\n    i0.ɵɵtext(5, \"\\u0646\\u0627\\u0645 \\u0643\\u0627\\u0644\\u0627\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"\\u0646\\u0627\\u0645 \\u0627\\u0646\\u0628\\u0627\\u0631\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0633\\u0631\\u06CC\\u0627\\u0644\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0646\\u0642\\u0636\\u0627\\u0621\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"\\u0631\\u0645\\u0632\\u06CC\\u0646\\u0647\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"\\u0639\\u0645\\u0644\\u06CC\\u0627\\u062A\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, WarehouseInventoryComponent_article_8_tr_17_Template, 15, 7, \"tr\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(18, \"p-messages\", 13);\n    i0.ɵɵtemplate(19, WarehouseInventoryComponent_article_8_div_19_Template, 3, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.warehouseInventories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r1.message)(\"showTransitionOptions\", \"300ms ease-out\")(\"hideTransitionOptions\", \"400ms cubic-bezier(0.86, 0, 0.07, 1)\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showPackages);\n  }\n}\nexport class WarehouseInventoryComponent {\n  constructor(warehouseInventoryService, packageWarehouseInventoryService) {\n    this.warehouseInventoryService = warehouseInventoryService;\n    this.packageWarehouseInventoryService = packageWarehouseInventoryService;\n    this.warehouseInventories = [];\n    this.warehouseInventoriesTemp = [];\n    this.title = 'موجودی';\n    this.editMode = false;\n    this.showPackages = false;\n    this.warehouseTitle = 'تمام انبارها';\n    this.warehouseId = '';\n    this.originLocation = '';\n    this.selectedPackageColor = '';\n    this.message = [];\n  }\n  ngOnInit() {\n    this.warehouseInventories = [];\n    this.onLoad();\n  }\n  onLoad() {\n    if (this.warehouseId != \"\") this.warehouseInventoryService.getByWarehouseId(this.warehouseId).subscribe(warehouseInventories => {\n      this.warehouseInventories = warehouseInventories;\n    });else this.warehouseInventoryService.getAllWarehouseInventory().subscribe(warehouseInventories => {\n      this.warehouseInventories = warehouseInventories;\n    });\n  }\n  reload() {\n    this.onLoad();\n  }\n  openPackage() {\n    this.showPackages = !this.showPackages;\n  }\n  addToPackage() {\n    let warehouseInventoryIds = [];\n    if (this.warehouseInventories != undefined) this.warehouseInventories.forEach(warehouseInventory => {\n      if (warehouseInventory.isSelected) warehouseInventoryIds.push(warehouseInventory.id);\n    });\n  }\n  getPackage($event) {\n    this.selectedPackage = $event;\n    this.selectedPackageColor = this.selectedPackage.color;\n  }\n  finishedPackaging($event) {\n    let selectedWarehouseInventory = [];\n    selectedWarehouseInventory = this.warehouseInventories?.filter(warehouseInventory => {\n      return warehouseInventory.isSelected;\n    });\n    if (selectedWarehouseInventory != undefined && selectedWarehouseInventory.length > 0) {\n      this.message = [{\n        severity: 'info',\n        summary: '',\n        detail: 'به بسته بندی کالا اضافه کردید'\n      }];\n      setTimeout(() => {\n        this.message = [];\n      }, 3000);\n      let packageWarehouseInventory = [];\n      let entity;\n      selectedWarehouseInventory.forEach(warehouseInventory => {\n        entity = new PackageWarehouseInventory();\n        entity.warehouseInventoryId = warehouseInventory.id;\n        entity.packageId = this.selectedPackage?.id;\n        packageWarehouseInventory.push(entity);\n      });\n      this.packageWarehouseInventoryService.savePackageWarehouseInventory(packageWarehouseInventory).subscribe(res => {}, error => {});\n    } else {\n      this.message = [{\n        severity: 'warn',\n        summary: '',\n        detail: 'شما هیچ کالایی را انتخاب نکردید'\n      }];\n      // setTimeout(() => {\n      //     this.message = [];\n      //   }, 3000\n      // );\n    }\n  }\n}\n\nWarehouseInventoryComponent.ɵfac = function WarehouseInventoryComponent_Factory(t) {\n  return new (t || WarehouseInventoryComponent)(i0.ɵɵdirectiveInject(i1.WarehouseInventoryService), i0.ɵɵdirectiveInject(i2.PackageWarehouseInventoryService));\n};\nWarehouseInventoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WarehouseInventoryComponent,\n  selectors: [[\"app-warehouse-inventory\"]],\n  viewQuery: function WarehouseInventoryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.packageComponent = _t.first);\n    }\n  },\n  inputs: {\n    warehouseTitle: \"warehouseTitle\",\n    warehouseId: \"warehouseId\",\n    originLocation: \"originLocation\"\n  },\n  decls: 9,\n  vars: 5,\n  consts: [[1, \"m-0\", \"p-0\"], [1, \"card\"], [1, \"bg-light\", \"row\", \"m-0\"], [1, \"col-sm-10\", \"lh-4\"], [4, \"ngIf\"], [1, \"text-end\", \"col-sm-2\", \"lh-lg\"], [3, \"showPlus\", \"reloadEmitter\", \"editModeEmitter\"], [\"class\", \"p-3\", 4, \"ngIf\"], [\"type\", \"color\", \"disabled\", \"\", 3, \"value\"], [1, \"p-3\"], [1, \"table\", \"table-bordered\", \"table-striped\", \"table-hover\", \"col-12\", \"col-sm-12\"], [1, \"\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"showTransitionOptions\", \"hideTransitionOptions\"], [\"class\", \"col-12\", 4, \"ngIf\"], [\"style\", \"\", 3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\", 4, \"ngIf\"], [\"class\", \"mx-1\", \"type\", \"checkbox\", \"value\", \"\", 3, \"name\", \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"pi pi-arrow-down text-danger fw-bold mx-1\", 3, \"click\", 4, \"ngIf\"], [1, \"pi\", \"pi-info-circle\", \"text-info\", \"fw-bold\", \"fs-5\", \"mx-1\"], [3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\"], [\"type\", \"checkbox\", \"value\", \"\", 1, \"mx-1\", 3, \"name\", \"ngModel\", \"ngModelChange\"], [1, \"pi\", \"pi-arrow-down\", \"text-danger\", \"fw-bold\", \"mx-1\", 3, \"click\"], [1, \"col-12\"], [3, \"selectedPackage\", \"finishedPackaging\"], [\"packageComponent\", \"\"]],\n  template: function WarehouseInventoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"header\", 2)(3, \"h2\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵtemplate(5, WarehouseInventoryComponent_span_5_Template, 3, 1, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"app-header-tools\", 6);\n      i0.ɵɵlistener(\"reloadEmitter\", function WarehouseInventoryComponent_Template_app_header_tools_reloadEmitter_7_listener() {\n        return ctx.reload();\n      })(\"editModeEmitter\", function WarehouseInventoryComponent_Template_app_header_tools_editModeEmitter_7_listener($event) {\n        return ctx.editMode = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(8, WarehouseInventoryComponent_article_8_Template, 20, 5, \"article\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\" \", ctx.title, \" \", ctx.warehouseTitle, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.selectedPackageColor != null && ctx.selectedPackageColor != \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"showPlus\", false);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.warehouseInventories != undefined && ctx.warehouseInventories.length > 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgModel, i5.QRCodeComponent, i6.Messages, i7.HeaderToolsComponent, i8.PackageComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["PackageWarehouseInventory","i0","WarehouseInventoryComponent","constructor","warehouseInventoryService","packageWarehouseInventoryService","ngOnInit","warehouseInventories","onLoad","warehouseId","getByWarehouseId","subscribe","getAllWarehouseInventory","reload","openPackage","showPackages","addToPackage","warehouseInventoryIds","undefined","forEach","warehouseInventory","isSelected","push","id","getPackage","$event","selectedPackage","selectedPackageColor","color","finishedPackaging","selectedWarehouseInventory","filter","length","message","severity","summary","detail","setTimeout","packageWarehouseInventory","entity","warehouseInventoryId","packageId","savePackageWarehouseInventory","res","error","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["D:\\wamp64\\www\\warehouseMicroService\\warehouseUi0\\src\\app\\warehouse-inventory\\warehouse-inventory.component.ts","D:\\wamp64\\www\\warehouseMicroService\\warehouseUi0\\src\\app\\warehouse-inventory\\warehouse-inventory.component.html"],"sourcesContent":["import {Component, Input, OnInit, ViewChild} from '@angular/core';\r\nimport {WarehouseInventory} from \"./warehouse-inventory\";\r\nimport {WarehouseInventoryService} from './warehouse-inventory.service';\r\nimport {PackageComponent} from \"../package/package.component\";\r\nimport {Package} from \"../package/package\";\r\nimport {Message} from \"primeng/api\";\r\nimport {PackageWarehouseInventoryService} from \"../packageWarehouseInventory/package-warehouse-inventory.service\";\r\nimport {PackageWarehouseInventory} from \"../packageWarehouseInventory/package-warehouse-inventory\";\r\n\r\n@Component({\r\n  selector: 'app-warehouse-inventory',\r\n  templateUrl: './warehouse-inventory.component.html',\r\n  styleUrls: ['./warehouse-inventory.component.css']\r\n})\r\nexport class WarehouseInventoryComponent implements OnInit {\r\n\r\n  public warehouseInventories: WarehouseInventory[] = [];\r\n  public warehouseInventoriesTemp: WarehouseInventory[] = [];\r\n  public title = 'موجودی';\r\n  public editMode = false;\r\n  public showPackages = false;\r\n  @Input() warehouseTitle = 'تمام انبارها';\r\n  @Input() public warehouseId = '';\r\n  @Input() originLocation = '';\r\n  @ViewChild('packageComponent') public packageComponent?: PackageComponent;\r\n  public selectedWare: any;\r\n  public selectedPackageColor?: string = '';\r\n  public selectedPackage?: Package;\r\n  public message: Message[] = [];\r\n\r\n  constructor(\r\n    private warehouseInventoryService: WarehouseInventoryService,\r\n    private packageWarehouseInventoryService: PackageWarehouseInventoryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.warehouseInventories = [];\r\n    this.onLoad();\r\n  }\r\n\r\n  onLoad() {\r\n    if (this.warehouseId != \"\")\r\n      this.warehouseInventoryService.getByWarehouseId(this.warehouseId).subscribe(warehouseInventories => {\r\n        this.warehouseInventories = warehouseInventories;\r\n      });\r\n    else\r\n      this.warehouseInventoryService.getAllWarehouseInventory().subscribe(warehouseInventories => {\r\n        this.warehouseInventories = warehouseInventories;\r\n      });\r\n  }\r\n\r\n  reload() {\r\n    this.onLoad();\r\n  }\r\n\r\n  openPackage() {\r\n    this.showPackages = !this.showPackages;\r\n  }\r\n\r\n  addToPackage() {\r\n    let warehouseInventoryIds = [];\r\n    if (this.warehouseInventories != undefined)\r\n    this.warehouseInventories.forEach((warehouseInventory) => {\r\n      if (warehouseInventory.isSelected)\r\n        warehouseInventoryIds.push(warehouseInventory.id);\r\n    });\r\n  }\r\n\r\n  getPackage($event: Package) {\r\n    this.selectedPackage = $event;\r\n    this.selectedPackageColor = this.selectedPackage.color;\r\n  }\r\n\r\n  finishedPackaging($event: Package) {\r\n    let selectedWarehouseInventory: WarehouseInventory[] | undefined = [];\r\n    selectedWarehouseInventory = this.warehouseInventories?.filter(warehouseInventory => {\r\n      return warehouseInventory.isSelected;\r\n    });\r\n    if (selectedWarehouseInventory != undefined && selectedWarehouseInventory.length > 0) {\r\n      this.message = [{severity: 'info', summary: '', detail: 'به بسته بندی کالا اضافه کردید'}];\r\n      setTimeout(() => {\r\n          this.message = [];\r\n        }, 3000\r\n      );\r\n      let packageWarehouseInventory: PackageWarehouseInventory[] = [];\r\n      let entity: PackageWarehouseInventory;\r\n      selectedWarehouseInventory.forEach(warehouseInventory => {\r\n        entity = new PackageWarehouseInventory();\r\n        entity.warehouseInventoryId = warehouseInventory.id;\r\n        entity.packageId = this.selectedPackage?.id;\r\n        packageWarehouseInventory.push(entity);\r\n      });\r\n      this.packageWarehouseInventoryService.savePackageWarehouseInventory(packageWarehouseInventory).subscribe(res => {\r\n        },\r\n        error => {\r\n        }\r\n      );\r\n    } else {\r\n      this.message = [{severity: 'warn', summary: '', detail: 'شما هیچ کالایی را انتخاب نکردید'}];\r\n      // setTimeout(() => {\r\n      //     this.message = [];\r\n      //   }, 3000\r\n      // );\r\n    }\r\n  }\r\n}\r\n","<div class=\"m-0 p-0\">\r\n  <div class=\"card\">\r\n    <header class=\"bg-light row m-0\">\r\n      <h2 class=\"col-sm-10 lh-4\"> {{ title }} {{ warehouseTitle }}\r\n        <span *ngIf=\"selectedPackageColor != null && selectedPackageColor != ''\"> بسته انتخاب شده\r\n          <input type=\"color\"\r\n                 [value]=\"selectedPackageColor\"\r\n                 disabled>\r\n        </span>\r\n      </h2>\r\n      <div class=\"text-end col-sm-2 lh-lg\">\r\n        <app-header-tools\r\n          (reloadEmitter)=\"reload()\"\r\n          [showPlus]=\"false\"\r\n          (editModeEmitter)=\"editMode=$event\"\r\n        ></app-header-tools>\r\n      </div>\r\n    </header>\r\n    <article class=\"p-3\" *ngIf=\"warehouseInventories != undefined && warehouseInventories.length > 0\">\r\n      <table class=\"table table-bordered table-striped table-hover col-12 col-sm-12\">\r\n        <thead>\r\n        <tr class=\"\">\r\n          <th>نام كالا</th>\r\n          <th>نام انبار</th>\r\n          <th>شماره سریال</th>\r\n          <th>تاريخ انقضاء</th>\r\n          <th>رمزینه</th>\r\n          <th>عملیات</th>\r\n          <!--          <th></th>-->\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr class=\"\" *ngFor=\"let warehouseInventory of warehouseInventories as WatchInventory\">\r\n          <td> {{ warehouseInventory.wareName }}</td>\r\n          <td> {{ warehouseInventory.warehouseTitle }}</td>\r\n          <!--          <td> {{ warehouseInventory.inventory }}</td>-->\r\n                    <td> {{ warehouseInventory.serial }}</td>\r\n          <td> {{ warehouseInventory.expirationDate ? warehouseInventory.expirationDate : 'ندارد' }}</td>\r\n          <td>\r\n            <qrcode [qrdata]=\"warehouseInventory.id\"\r\n                    *ngIf=\"warehouseInventory.id != undefined\"\r\n                    [errorCorrectionLevel]=\"'M'\"\r\n                    [colorLight]=\"'#00000000'\"\r\n                    [width]=\"150\"\r\n                    style=\"\"\r\n                    [cssClass]=\"'bordered'\"\r\n            ></qrcode>\r\n          </td>\r\n          <td>\r\n            <input class=\"mx-1\" type=\"checkbox\"\r\n                   [name]=\"warehouseInventory.id\" value=\"\"\r\n                   [(ngModel)]=\"warehouseInventory.isSelected\"\r\n                   *ngIf=\"originLocation == 'export' && showPackages && warehouseInventory.id != undefined\">\r\n            <i class=\"pi pi-arrow-down text-danger fw-bold mx-1\"\r\n               (click)=\"openPackage()\"\r\n               *ngIf=\"originLocation == 'export' && !showPackages\"></i>\r\n            <i class=\"pi pi-info-circle text-info fw-bold fs-5 mx-1\"></i>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n      <!--      <div class=\"col-12 col-sm-12 p-3\">-->\r\n      <!--        <div class=\"border offset-11 text-center rounded-circle bg-success text-white\"-->\r\n      <!--             style=\"line-height: 3.7rem\"-->\r\n      <!--             (click)=\"addToPackage()\"-->\r\n      <!--        >-->\r\n      <!--        <i class=\"pi pi-plus fw-bold\"></i>-->\r\n      <!--        </div>-->\r\n      <!--      </div>-->\r\n      <p-messages [value]=\"message\" [showTransitionOptions]=\"'300ms ease-out'\"\r\n                  [hideTransitionOptions]=\"'400ms cubic-bezier(0.86, 0, 0.07, 1)'\"></p-messages>\r\n      <div class=\"col-12\"\r\n           *ngIf=\"showPackages\"\r\n      >\r\n        <app-package\r\n          #packageComponent\r\n          (selectedPackage)=\"getPackage($event)\"\r\n          (finishedPackaging)=\"finishedPackaging($event)\"\r\n        ></app-package>\r\n      </div>\r\n      <!--      <div class=\"\" *ngIf=\"editMode\">-->\r\n      <!--&lt;!&ndash;          [warehouseId]=\"editLoadId\"&ndash;&gt;-->\r\n      <!--        <app-warehouse-inventory-edit-->\r\n      <!--          (editModeEmitter)=\"editModeBack($event)\"-->\r\n      <!--        ></app-warehouse-inventory-edit>-->\r\n      <!--      </div>-->\r\n    </article>\r\n  </div>\r\n</div>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}