{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./warehouse.service\";\nimport * as i2 from \"../warehouse-inventory/warehouse-inventory.service\";\nimport * as i3 from \"../ware/ware.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../warehouse-inventory/warehouse-inventory.component\";\nimport * as i6 from \"./warehouse-edit.component\";\nimport * as i7 from \"../general/utility/header-tools/header-tools.component\";\nimport * as i8 from \"../warehouse-inventory/warehouse-inventory-edit.component\";\nimport * as i9 from \"./warehouse-search.component\";\nfunction WarehouseComponent_h2_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.title, \" \", ctx_r0.warehouseTitle, \"\");\n  }\n}\nfunction WarehouseComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 11);\n    i0.ɵɵtext(1, \" \\u062A\\u0639\\u0631\\u06CC\\u0641 \\u0627\\u0646\\u0628\\u0627\\u0631 \\u062C\\u062F\\u06CC\\u062F \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WarehouseComponent_table_10_tr_10_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" \\u0641\\u0639\\u0627\\u0644\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WarehouseComponent_table_10_tr_10_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" \\u063A\\u06CC\\u0631 \\u0641\\u0639\\u0627\\u0644\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WarehouseComponent_table_10_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 14);\n    i0.ɵɵlistener(\"dblclick\", function WarehouseComponent_table_10_tr_10_Template_tr_dblclick_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const warehouse_r8 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.switchToEditMode(warehouse_r8.id));\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, WarehouseComponent_table_10_tr_10_td_3_Template, 2, 0, \"td\", 15);\n    i0.ɵɵtemplate(4, WarehouseComponent_table_10_tr_10_ng_template_4_Template, 2, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(6, \"td\")(7, \"div\")(8, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function WarehouseComponent_table_10_tr_10_Template_i_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const warehouse_r8 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.importWare(warehouse_r8));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\u00A0 \");\n    i0.ɵɵelementStart(10, \"i\", 18);\n    i0.ɵɵlistener(\"click\", function WarehouseComponent_table_10_tr_10_Template_i_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const warehouse_r8 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.exportWare(warehouse_r8));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\u00A0 \");\n    i0.ɵɵelementStart(12, \"i\", 19);\n    i0.ɵɵlistener(\"click\", function WarehouseComponent_table_10_tr_10_Template_i_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const warehouse_r8 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.switchToInventory(warehouse_r8));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const warehouse_r8 = ctx.$implicit;\n    const _r10 = i0.ɵɵreference(5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouse_r8.name, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", warehouse_r8.status)(\"ngIfElse\", _r10);\n  }\n}\nfunction WarehouseComponent_table_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 12)(1, \"thead\")(2, \"tr\", 0)(3, \"th\");\n    i0.ɵɵtext(4, \"\\u0646\\u0627\\u0645 \\u0627\\u0646\\u0628\\u0627\\u0631\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"\\u0648\\u0636\\u0639\\u064A\\u062A\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"\\u0639\\u0645\\u0644\\u06CC\\u0627\\u062A\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, WarehouseComponent_table_10_tr_10_Template, 13, 3, \"tr\", 13);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.warehouses);\n  }\n}\nfunction WarehouseComponent_div_11_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"app-warehouse-inventory-edit\", 29);\n    i0.ɵɵlistener(\"switchToGrid\", function WarehouseComponent_div_11_div_7_Template_app_warehouse_inventory_edit_switchToGrid_1_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.backFromWarehouseInventory($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"wares\", ctx_r17.wares)(\"warehouseId\", ctx_r17.warehouseId);\n  }\n}\nfunction WarehouseComponent_div_11_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelement(1, \"app-warehouse-inventory\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"warehouseId\", ctx_r18.warehouseId)(\"warehouseTitle\", ctx_r18.warehouseTitles)(\"originLocation\", \"export\");\n  }\n}\nfunction WarehouseComponent_div_11_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelement(1, \"app-warehouse-inventory\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"warehouseId\", ctx_r19.warehouseId)(\"warehouseTitle\", ctx_r19.warehouseTitles)(\"originLocation\", \"showInventory\");\n  }\n}\nfunction WarehouseComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"div\", 22)(3, \"span\", 23);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 24)(6, \"i\", 25);\n    i0.ɵɵlistener(\"click\", function WarehouseComponent_div_11_Template_i_click_6_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.closeModal());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, WarehouseComponent_div_11_div_7_Template, 2, 2, \"div\", 26);\n    i0.ɵɵtemplate(8, WarehouseComponent_div_11_div_8_Template, 2, 3, \"div\", 27);\n    i0.ɵɵtemplate(9, WarehouseComponent_div_11_div_9_Template, 2, 3, \"div\", 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r4.modalHeader);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.importDiv);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.exportDiv);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.showInventory);\n  }\n}\nfunction WarehouseComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-warehouse-edit\", 32);\n    i0.ɵɵlistener(\"editModeEmitter\", function WarehouseComponent_div_12_Template_app_warehouse_edit_editModeEmitter_1_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.editModeBack($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"warehouseId\", ctx_r5.editLoadId);\n  }\n}\nfunction WarehouseComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-warehouse-search\", 33);\n    i0.ɵɵlistener(\"searchModeEmitter\", function WarehouseComponent_div_13_Template_app_warehouse_search_searchModeEmitter_1_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.searchConfig($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class WarehouseComponent {\n  constructor(warehouseService, warehouseInventoryService, wareService) {\n    this.warehouseService = warehouseService;\n    this.warehouseInventoryService = warehouseInventoryService;\n    this.wareService = wareService;\n    this.warehouseInventories = [];\n    this.title = 'انبار';\n    this.warehouseTitle = '';\n    this.warehouseTitles = '';\n    this.sourceLoad = true;\n    this.editModeTitle = 'ویرایش انبار';\n    this.editMode = false;\n    this.searchMode = false;\n    this.editLoadId = '';\n    this.importDiv = false;\n    this.exportDiv = false;\n    this.showInventory = false;\n    this.warehouseId = '';\n    this.modalHeader = '';\n  }\n  ngOnInit() {\n    this.onLoad();\n  }\n  onLoad() {\n    this.warehouseService.getAllWarehouses().subscribe(warehouses => {\n      this.warehouses = warehouses;\n    });\n  }\n  reload() {\n    this.editMode ? console.log('if') : this.onLoad();\n  }\n  editModeBack($event) {\n    this.editLoadId = '';\n    this.editMode = $event;\n    this.onLoad();\n  }\n  deleteWarehouse(warehouse) {\n    this.warehouseService.deleteWarehouse(warehouse).subscribe(data => {\n      this.onLoad();\n    });\n  }\n  switchToEditMode(loadId) {\n    this.editLoadId = loadId;\n    this.editModeTitle = 'تعریف انبار جدید';\n    this.editMode = true;\n  }\n  importWare(warehouse) {\n    this.warehouseId = warehouse.id;\n    this.wareService.getAllWare().subscribe(wares => {\n      this.wares = wares;\n    });\n    this.exportDiv = false;\n    this.showInventory = false;\n    this.importDiv = !this.importDiv;\n    this.modalHeader = 'ثبت کالای ورودی';\n  }\n  exportWare(warehouse) {\n    this.warehouseId = warehouse.id;\n    this.warehouseTitles = 'انبار' + warehouse.name;\n    this.importDiv = false;\n    this.showInventory = false;\n    this.exportDiv = !this.exportDiv;\n    if (this.exportDiv) {\n      this.warehouseInventoryService.getByWarehouseId(this.warehouseId).subscribe(warehouseInventories => {\n        this.warehouseInventories = warehouseInventories;\n        // @ts-ignore\n        this.warehousesFiltered = this.warehouses.filter(warehouse => {\n          return warehouse.id !== this.warehouseId;\n        });\n      });\n      this.modalHeader = 'خروج کالا از انبار';\n    }\n  }\n  switchToInventory(warehouse) {\n    this.warehouseId = warehouse.id;\n    this.warehouseTitles = 'انبار' + warehouse.name;\n    this.importDiv = false;\n    this.exportDiv = false;\n    this.showInventory = !this.showInventory;\n    this.modalHeader = 'نمایش کالا';\n  }\n  closeModal() {\n    this.importDiv = false;\n    this.exportDiv = false;\n    this.showInventory = false;\n  }\n  backFromWarehouseInventory($event) {\n    if ($event) {\n      this.importDiv = this.importDiv = false;\n      this.exportDiv = this.exportDiv = false;\n    }\n  }\n  searchModeBack($event) {\n    this.searchMode = !this.searchMode;\n  }\n  searchConfig(vent) {\n    console.log(vent);\n    this.warehouseSearchModel = vent;\n    this.searchMode = false;\n    this.warehouseService.getAllWarehouses().subscribe(warehouses => {\n      this.warehouses = [];\n      if (warehouses.length > 0) {\n        this.warehouses = warehouses.filter(warehouse => {\n          // @ts-ignore\n          return warehouse.name.search(this.warehouseSearchModel.name) != -1; // && warehouse.status == this.warehouseSearchModel.status;\n        });\n      }\n    });\n  }\n}\n\nWarehouseComponent.ɵfac = function WarehouseComponent_Factory(t) {\n  return new (t || WarehouseComponent)(i0.ɵɵdirectiveInject(i1.WarehouseService), i0.ɵɵdirectiveInject(i2.WarehouseInventoryService), i0.ɵɵdirectiveInject(i3.WareService));\n};\nWarehouseComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WarehouseComponent,\n  selectors: [[\"app-warehouse\"]],\n  inputs: {\n    sourceLoad: \"sourceLoad\"\n  },\n  decls: 14,\n  vars: 7,\n  consts: [[1, \"\"], [1, \"card\"], [1, \"bg-light\", \"row\", \"m-0\"], [\"class\", \"col-sm-7 lh-4\", 4, \"ngIf\", \"ngIfElse\"], [\"editModeTitle\", \"\"], [1, \"text-end\", \"col-sm-5\", \"lh-lg\"], [3, \"editMode\", \"editModeEmitter\", \"reloadEmitter\", \"searchModeEmitter\"], [1, \"p-3\"], [\"class\", \"table table-bordered table-striped table-hover\", 4, \"ngIf\"], [\"style\", \"position: absolute; top: 150px; left: 5px; z-index: 1;\", \"class\", \"bg-whit e w-100\", 4, \"ngIf\"], [\"class\", \"\", 4, \"ngIf\"], [1, \"col-sm-7\", \"lh-4\"], [1, \"table\", \"table-bordered\", \"table-striped\", \"table-hover\"], [\"class\", \"\", 3, \"dblclick\", 4, \"ngFor\", \"ngForOf\"], [1, \"\", 3, \"dblclick\"], [4, \"ngIf\", \"ngIfElse\"], [\"deactive\", \"\"], [1, \"fa\", \"fa-arrow-up\", \"text-success\", 3, \"click\"], [1, \"fa\", \"fa-arrow-down\", \"text-danger\", 3, \"click\"], [1, \"fa\", \"fa-warehouse\", \"text-dark\", 3, \"click\"], [1, \"bg-whit\", \"e\", \"w-100\", 2, \"position\", \"absolute\", \"top\", \"150px\", \"left\", \"5px\", \"z-index\", \"1\"], [1, \"row\", \"m-0\", \"p-0\", \"bg-da\", \"rk\", \"m-auto\", \"w-90\", 2, \"height\", \"400px\"], [1, \"col-12\", \"col-sm-12\", \"d-flex\", \"justify-content-around\", \"modals-header\", \"p-2\", 2, \"height\", \"10%\"], [1, \"col-11\", \"col-sm-11\"], [1, \"col-1\", \"col-sm-1\"], [1, \"offset-9\", \"fa\", \"fa-times\", 2, \"width\", \"1%\", 3, \"click\"], [\"class\", \"\", \"style\", \"height: 90%\", 4, \"ngIf\"], [\"class\", \"p-0\", \"style\", \"height: 90%; position: relative; top: 0;\", 4, \"ngIf\"], [1, \"\", 2, \"height\", \"90%\"], [3, \"wares\", \"warehouseId\", \"switchToGrid\"], [1, \"p-0\", 2, \"height\", \"90%\", \"position\", \"relative\", \"top\", \"0\"], [3, \"warehouseId\", \"warehouseTitle\", \"originLocation\"], [3, \"warehouseId\", \"editModeEmitter\"], [3, \"searchModeEmitter\"]],\n  template: function WarehouseComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"header\", 2);\n      i0.ɵɵtemplate(3, WarehouseComponent_h2_3_Template, 2, 2, \"h2\", 3);\n      i0.ɵɵtemplate(4, WarehouseComponent_ng_template_4_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"span\")(8, \"app-header-tools\", 6);\n      i0.ɵɵlistener(\"editModeEmitter\", function WarehouseComponent_Template_app_header_tools_editModeEmitter_8_listener($event) {\n        return ctx.editModeBack($event);\n      })(\"reloadEmitter\", function WarehouseComponent_Template_app_header_tools_reloadEmitter_8_listener() {\n        return ctx.reload();\n      })(\"searchModeEmitter\", function WarehouseComponent_Template_app_header_tools_searchModeEmitter_8_listener($event) {\n        return ctx.searchModeBack($event);\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"article\", 7);\n      i0.ɵɵtemplate(10, WarehouseComponent_table_10_Template, 11, 1, \"table\", 8);\n      i0.ɵɵtemplate(11, WarehouseComponent_div_11_Template, 10, 4, \"div\", 9);\n      i0.ɵɵtemplate(12, WarehouseComponent_div_12_Template, 2, 1, \"div\", 10);\n      i0.ɵɵtemplate(13, WarehouseComponent_div_13_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(5);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editMode)(\"ngIfElse\", _r1);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"editMode\", ctx.editMode);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editMode && !ctx.searchMode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.importDiv || ctx.exportDiv || ctx.showInventory);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchMode);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.WarehouseInventoryComponent, i6.WarehouseEditComponent, i7.HeaderToolsComponent, i8.WarehouseInventoryEditComponent, i9.WarehouseSearchComponent],\n  styles: [\"h4[_ngcontent-%COMP%]{display:inline}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}