{"ast":null,"code":"import { PackageWarehouseInventory } from \"../packageWarehouseInventory/package-warehouse-inventory\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./warehouse-inventory.service\";\nimport * as i2 from \"../packageWarehouseInventory/package-warehouse-inventory.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"angularx-qrcode\";\nimport * as i6 from \"primeng/messages\";\nimport * as i7 from \"../general/utility/header-tools/header-tools.component\";\nimport * as i8 from \"../package/package.component\";\nconst _c0 = [\"packageComponent\"];\nfunction WarehouseInventoryComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" \\u0628\\u0633\\u062A\\u0647 \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u0634\\u062F\\u0647 \");\n    i0.ɵɵelement(2, \"input\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r0.selectedPackageColor);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_qrcode_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"qrcode\", 19);\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"qrdata\", warehouseInventory_r4.id)(\"errorCorrectionLevel\", \"M\")(\"colorLight\", \"#00000000\")(\"width\", 150)(\"cssClass\", \"bordered\");\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_input_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function WarehouseInventoryComponent_article_8_tr_17_input_12_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(warehouseInventory_r4.isSelected = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"name\", warehouseInventory_r4.id)(\"ngModel\", warehouseInventory_r4.isSelected);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_i_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 21);\n    i0.ɵɵlistener(\"click\", function WarehouseInventoryComponent_article_8_tr_17_i_13_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.openPackage());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction WarehouseInventoryComponent_article_8_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 11)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, WarehouseInventoryComponent_article_8_tr_17_qrcode_10_Template, 1, 5, \"qrcode\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtemplate(12, WarehouseInventoryComponent_article_8_tr_17_input_12_Template, 1, 2, \"input\", 16);\n    i0.ɵɵtemplate(13, WarehouseInventoryComponent_article_8_tr_17_i_13_Template, 1, 0, \"i\", 17);\n    i0.ɵɵelement(14, \"i\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const warehouseInventory_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.wareName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.warehouseTitle, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.serial, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", warehouseInventory_r4.expirationDate ? warehouseInventory_r4.expirationDate : \"\\u0646\\u062F\\u0627\\u0631\\u062F\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", warehouseInventory_r4.id != undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.originLocation == \"export\" && ctx_r2.showPackages && warehouseInventory_r4.id != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.originLocation == \"export\" && !ctx_r2.showPackages);\n  }\n}\nfunction WarehouseInventoryComponent_article_8_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"app-package\", 23, 24);\n    i0.ɵɵlistener(\"selectedPackage\", function WarehouseInventoryComponent_article_8_div_19_Template_app_package_selectedPackage_1_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.getPackage($event));\n    })(\"finishedPackaging\", function WarehouseInventoryComponent_article_8_div_19_Template_app_package_finishedPackaging_1_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.finishedPackaging($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction WarehouseInventoryComponent_article_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"article\", 9)(1, \"table\", 10)(2, \"thead\")(3, \"tr\", 11)(4, \"th\");\n    i0.ɵɵtext(5, \"\\u0646\\u0627\\u0645 \\u0643\\u0627\\u0644\\u0627\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"\\u0646\\u0627\\u0645 \\u0627\\u0646\\u0628\\u0627\\u0631\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0633\\u0631\\u06CC\\u0627\\u0644\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0646\\u0642\\u0636\\u0627\\u0621\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"\\u0631\\u0645\\u0632\\u06CC\\u0646\\u0647\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"\\u0639\\u0645\\u0644\\u06CC\\u0627\\u062A\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, WarehouseInventoryComponent_article_8_tr_17_Template, 15, 7, \"tr\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(18, \"p-messages\", 13);\n    i0.ɵɵtemplate(19, WarehouseInventoryComponent_article_8_div_19_Template, 3, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.warehouseInventories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r1.message)(\"showTransitionOptions\", \"300ms ease-out\")(\"hideTransitionOptions\", \"400ms cubic-bezier(0.86, 0, 0.07, 1)\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showPackages);\n  }\n}\nexport class WarehouseInventoryComponent {\n  constructor(warehouseInventoryService, packageWarehouseInventoryService) {\n    this.warehouseInventoryService = warehouseInventoryService;\n    this.packageWarehouseInventoryService = packageWarehouseInventoryService;\n    this.warehouseInventories = [];\n    this.warehouseInventoriesTemp = [];\n    this.title = 'موجودی';\n    this.editMode = false;\n    this.showPackages = false;\n    this.warehouseTitle = 'تمام انبارها';\n    this.warehouseId = '';\n    this.originLocation = '';\n    this.selectedPackageColor = '';\n    this.message = [];\n  }\n  ngOnInit() {\n    this.warehouseInventories = [];\n    this.onLoad();\n  }\n  onLoad() {\n    if (this.warehouseId != \"\") this.warehouseInventoryService.getByWarehouseId(this.warehouseId).subscribe(warehouseInventories => {\n      this.warehouseInventories = warehouseInventories;\n    });else this.warehouseInventoryService.getAllWarehouseInventory().subscribe(warehouseInventories => {\n      this.warehouseInventories = warehouseInventories;\n    });\n  }\n  reload() {\n    this.onLoad();\n  }\n  openPackage() {\n    this.showPackages = !this.showPackages;\n  }\n  addToPackage() {\n    let warehouseInventoryIds = [];\n    if (this.warehouseInventories != undefined) this.warehouseInventories.forEach(warehouseInventory => {\n      if (warehouseInventory.isSelected) warehouseInventoryIds.push(warehouseInventory.id);\n    });\n  }\n  getPackage($event) {\n    this.selectedPackage = $event;\n    this.selectedPackageColor = this.selectedPackage.color;\n  }\n  finishedPackaging($event) {\n    let selectedWarehouseInventory = [];\n    selectedWarehouseInventory = this.warehouseInventories?.filter(warehouseInventory => {\n      return warehouseInventory.isSelected;\n    });\n    if (selectedWarehouseInventory != undefined && selectedWarehouseInventory.length > 0) {\n      this.message = [{\n        severity: 'info',\n        summary: '',\n        detail: 'به بسته بندی کالا اضافه کردید'\n      }];\n      setTimeout(() => {\n        this.message = [];\n      }, 3000);\n      let packageWarehouseInventory = [];\n      let entity;\n      selectedWarehouseInventory.forEach(warehouseInventory => {\n        entity = new PackageWarehouseInventory();\n        entity.warehouseInventoryId = warehouseInventory.id;\n        entity.packageId = this.selectedPackage?.id;\n        packageWarehouseInventory.push(entity);\n      });\n      this.packageWarehouseInventoryService.savePackageWarehouseInventory(packageWarehouseInventory).subscribe(res => {}, error => {});\n    } else {\n      this.message = [{\n        severity: 'warn',\n        summary: '',\n        detail: 'شما هیچ کالایی را انتخاب نکردید'\n      }];\n      // setTimeout(() => {\n      //     this.message = [];\n      //   }, 3000\n      // );\n    }\n  }\n}\n\nWarehouseInventoryComponent.ɵfac = function WarehouseInventoryComponent_Factory(t) {\n  return new (t || WarehouseInventoryComponent)(i0.ɵɵdirectiveInject(i1.WarehouseInventoryService), i0.ɵɵdirectiveInject(i2.PackageWarehouseInventoryService));\n};\nWarehouseInventoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WarehouseInventoryComponent,\n  selectors: [[\"app-warehouse-inventory\"]],\n  viewQuery: function WarehouseInventoryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.packageComponent = _t.first);\n    }\n  },\n  inputs: {\n    warehouseTitle: \"warehouseTitle\",\n    warehouseId: \"warehouseId\",\n    originLocation: \"originLocation\"\n  },\n  decls: 9,\n  vars: 5,\n  consts: [[1, \"m-0\", \"p-0\"], [1, \"card\"], [1, \"bg-light\", \"row\", \"m-0\"], [1, \"col-sm-10\", \"lh-4\"], [4, \"ngIf\"], [1, \"text-end\", \"col-sm-2\", \"lh-lg\"], [3, \"showPlus\", \"reloadEmitter\", \"editModeEmitter\"], [\"class\", \"p-3\", 4, \"ngIf\"], [\"type\", \"color\", \"disabled\", \"\", 3, \"value\"], [1, \"p-3\"], [1, \"table\", \"table-bordered\", \"table-striped\", \"table-hover\", \"col-12\", \"col-sm-12\"], [1, \"\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"showTransitionOptions\", \"hideTransitionOptions\"], [\"class\", \"col-12\", 4, \"ngIf\"], [\"style\", \"\", 3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\", 4, \"ngIf\"], [\"class\", \"mx-1\", \"type\", \"checkbox\", \"value\", \"\", 3, \"name\", \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"pi pi-arrow-down text-danger fw-bold mx-1\", 3, \"click\", 4, \"ngIf\"], [1, \"pi\", \"pi-info-circle\", \"text-info\", \"fw-bold\", \"fs-5\", \"mx-1\"], [3, \"qrdata\", \"errorCorrectionLevel\", \"colorLight\", \"width\", \"cssClass\"], [\"type\", \"checkbox\", \"value\", \"\", 1, \"mx-1\", 3, \"name\", \"ngModel\", \"ngModelChange\"], [1, \"pi\", \"pi-arrow-down\", \"text-danger\", \"fw-bold\", \"mx-1\", 3, \"click\"], [1, \"col-12\"], [3, \"selectedPackage\", \"finishedPackaging\"], [\"packageComponent\", \"\"]],\n  template: function WarehouseInventoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"header\", 2)(3, \"h2\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵtemplate(5, WarehouseInventoryComponent_span_5_Template, 3, 1, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"app-header-tools\", 6);\n      i0.ɵɵlistener(\"reloadEmitter\", function WarehouseInventoryComponent_Template_app_header_tools_reloadEmitter_7_listener() {\n        return ctx.reload();\n      })(\"editModeEmitter\", function WarehouseInventoryComponent_Template_app_header_tools_editModeEmitter_7_listener($event) {\n        return ctx.editMode = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(8, WarehouseInventoryComponent_article_8_Template, 20, 5, \"article\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\" \", ctx.title, \" \", ctx.warehouseTitle, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.selectedPackageColor != null && ctx.selectedPackageColor != \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"showPlus\", false);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.warehouseInventories != undefined && ctx.warehouseInventories.length > 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgModel, i5.QRCodeComponent, i6.Messages, i7.HeaderToolsComponent, i8.PackageComponent]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}